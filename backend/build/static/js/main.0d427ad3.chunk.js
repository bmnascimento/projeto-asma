(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{45:function(e,t,a){e.exports=a(75)},50:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),l=a.n(c),o=(a(50),a(7)),i=a(12),u=a(5),s=a(19),m=a.n(s),d=a(20),E=a(8),p=a(17),f=a(42),b=a(21),h=a(41),v=a(15),g=a(43),j=a(10),O=a.n(j),N={login:function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=function(e){var t=e.setUser,a=Object(n.useState)(""),c=Object(o.a)(a,2),l=c[0],i=c[1],s=Object(n.useState)(""),j=Object(o.a)(s,2),O=j[0],y=j[1],k=Object(n.useState)(!1),S=Object(o.a)(k,2),w=S[0],I=S[1],x=Object(n.useState)(!1),C=Object(o.a)(x,2),D=C[0],A=C[1],L=Object(u.g)(),T=function(){var e=Object(d.a)(m.a.mark((function e(a){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,A(!0),e.next=5,N.login({email:l,password:O});case 5:n=e.sent,w&&window.localStorage.setItem("usuarioLogado",JSON.stringify(n)),t(n),A(!1),L.push("/"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("Wrong credentials");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement(v.a,{bg:"dark",variant:"dark"},r.a.createElement(v.a.Brand,null,"Login"))),r.a.createElement("main",{className:"bg-light"},r.a.createElement(h.a,null,r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(b.a,{className:"col-md-5 col-lg-4 p-3 m-4 border"},r.a.createElement(E.a,{onSubmit:T},r.a.createElement(E.a.Group,{controlId:"formBasicEmail"},r.a.createElement(E.a.Label,null,"Email"),r.a.createElement(E.a.Control,{type:"email",placeholder:"Email",value:l,onChange:function(e){var t=e.target;return i(t.value)}})),r.a.createElement(E.a.Group,{controlId:"formBasicPassword"},r.a.createElement(E.a.Label,null,"Senha"),r.a.createElement(E.a.Control,{type:"password",placeholder:"Senha",value:O,onChange:function(e){var t=e.target;return y(t.value)}})),r.a.createElement(E.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(E.a.Check,{type:"checkbox",label:"Lembrar-me",checked:w,onChange:function(e){var t=e.target;return I(t.checked)}})),r.a.createElement(p.a,{variant:"primary",type:"submit"},D?r.a.createElement(g.a,{animation:"border",role:"status",size:"sm"}):"Entrar")))))))},k={getAll:function(){return O.a.get("/api/patients").then((function(e){return e.data}))},getOne:function(e){return O.a.get("".concat("/api/patients","/").concat(e)).then((function(e){return e.data}))},create:function(e){return O.a.post("/api/patients",e).then((function(e){return e.data}))},update:function(e,t){return O.a.put("".concat("/api/patients","/").concat(e),t).then((function(e){return e.data}))},deleteOne:function(e){return O.a.delete("".concat("/api/patients","/").concat(e)).then((function(e){return e.data}))}},S=function(){var e=Object(n.useState)(void 0),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),u=Object(o.a)(l,2),s=u[0],m=u[1],d=Object(n.useState)(""),E=Object(o.a)(d,2),p=E[0],f=E[1];Object(n.useEffect)((function(){k.getAll().then((function(e){return c(e)}))}),[]);return r.a.createElement("div",{style:{width:"250px"}},r.a.createElement("h1",null,"Pacientes"),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),void 0===a.find((function(e){return e.name===s}))?k.create({name:s,phone:p}).then((function(e){c(a.concat(e)),f(""),m("")})).catch((function(){return alert("nao foi possivel adicionar paciente")})):alert("Pessoa j\xe1 adicionada")}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"nameInput"},"Nome:"),r.a.createElement("input",{value:s,onChange:function(e){return m(e.target.value)},className:"form-control",id:"nameInput"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"phoneInput"},"Telefone:"),r.a.createElement("input",{value:p,onChange:function(e){return f(e.target.value)},className:"form-control",id:"phoneInput"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Adicionar"))),a?r.a.createElement("div",{className:"list-group my-3"},a.map((function(e){return r.a.createElement(i.b,{to:"pacientes/".concat(e.id,"/resumo"),key:e.id,className:"list-group-item list-group-item-action text-primary"},e.name)}))):r.a.createElement("div",{className:"d-flex align-items-center my-3"},"Carregando...",r.a.createElement("div",{className:"spinner-border ml-auto",role:"status","aria-hidden":"true"})))},w=function(){return r.a.createElement("div",{className:"border-right border-bottom border-left p-3"},r.a.createElement("h4",null,"Resumo"))},I=a(44),x=function(e,t,a){return O.a.get("https://api.fitbit.com/1/user/".concat(e,"/activities/date/").concat(t,".json"),{headers:{Authorization:"Bearer "+a}}).then((function(e){return e.data}))},C=function(e){var t=""+(e.getMonth()+1),a=""+e.getDate(),n=e.getFullYear();return t.length<2&&(t="0"+t),a.length<2&&(a="0"+a),[n,t,a].join("-")},D=function(e){var t=e.fitbitId,a=e.accessToken,c=Object(n.useState)([]),l=Object(o.a)(c,2),i=l[0],u=l[1];return Object(n.useEffect)((function(){for(var e=[],n=new Date,r=0;r<5;r++)e.push(x(t,C(n),a)),n.setDate(n.getDate()-1);Promise.all(e).then((function(e){for(var t=new Date,a=function(a){var n=e[a];u((function(e){return e.concat({data:C(t),numPassos:n.summary.steps,minutosAtivos:n.summary.fairlyActiveMinutes+n.summary.lightlyActiveMinutes+n.summary.veryActiveMinutes,minutosSedentarios:n.summary.sedentaryMinutes})})),t.setDate(t.getDate()-1)},n=0;n<5;n++)a(n)}))}),[t,a]),r.a.createElement("div",{className:"border-right border-bottom border-left p-3"},r.a.createElement("h4",null,"Dados"),r.a.createElement(I.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Data"),r.a.createElement("th",null,"n\xba de passos"),r.a.createElement("th",null,"Horas ativas"),r.a.createElement("th",null,"Horas Sedentarias"))),r.a.createElement("tbody",null,i.map((function(e){return r.a.createElement("tr",{key:e.data},r.a.createElement("td",null,e.data),r.a.createElement("td",null,e.numPassos),r.a.createElement("td",null,e.minutosAtivos/60),r.a.createElement("td",null,e.minutosSedentarios/60))})))))},A=function(){return r.a.createElement("div",{className:"border-right border-bottom border-left p-3"},r.a.createElement("h4",null,"Metas"))},L=function(){var e=Object(n.useState)({}),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(u.h)().id;Object(n.useEffect)((function(){k.getOne(l).then((function(e){var t=e;"expired"===t.accessToken&&k.refreshToken(l).then((function(e){t.accessToken=e.accessToken})),c(t)}))}),[l]);var s=Object(u.i)().url;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",null,"Nome: ",a.name),r.a.createElement("div",null,"Telefone: ",a.phone),r.a.createElement("div",null,"ID Fitbit: ",a.fitbitId?a.fitbitId:r.a.createElement("a",{href:"/auth/fitbit/".concat(l)},"Conectar ao Fitbit"))),r.a.createElement("br",null),r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.c,{to:"".concat(s,"/resumo"),className:"nav-link"},"Resumo")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.c,{to:"".concat(s,"/dados"),className:"nav-link"},"Dados")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.c,{to:"".concat(s,"/metas"),className:"nav-link"},"Metas"))),r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"".concat(s,"/resumo")},r.a.createElement(w,null)),r.a.createElement(u.b,{path:"".concat(s,"/dados")},r.a.createElement(D,{fitbitId:a.fitbitId,accessToken:a.accessToken})),r.a.createElement(u.b,{path:"".concat(s,"/metas")},r.a.createElement(A,null))))},T={getAll:function(){return O.a.get("/api/usuarios").then((function(e){return e.data}))}},P=function(){var e=Object(n.useState)(void 0),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),i=Object(o.a)(l,2),u=i[0],s=i[1],m=Object(n.useState)(""),d=Object(o.a)(m,2),f=d[0],b=d[1];Object(n.useEffect)((function(){T.getAll().then((function(e){return c(e)}))}),[]);return r.a.createElement("div",{style:{width:"250px"}},r.a.createElement("h1",null,"Usu\xe1rios"),r.a.createElement(E.a,{onSubmit:function(e){e.preventDefault(),void 0===a.find((function(e){return e.name===u}))?T.create({name:u,phone:f}).then((function(e){c(a.concat(e)),b(""),s("")})).catch((function(){return alert("nao foi possivel adicionar paciente")})):alert("Pessoa j\xe1 adicionada")}},r.a.createElement(E.a.Group,{controlId:"formEmail"},r.a.createElement(E.a.Label,null,"Email"),r.a.createElement(E.a.Control,{type:"email",placeholder:"Email",value:u,onChange:function(e){return s(e.target.value)}})),r.a.createElement(E.a.Group,{controlId:"formPassword"},r.a.createElement(E.a.Label,null,"Senha"),r.a.createElement(E.a.Control,{type:"password",placeholder:"Senha",value:f,onChange:function(e){return b(e.target.value)}})),r.a.createElement(p.a,{type:"submit",variant:"primary"},"Adicionar")),a?r.a.createElement("div",{className:"list-group my-3"},a.map((function(e){return r.a.createElement("div",{key:e.id,className:"list-group-item list-group-item-action"},e.email)}))):r.a.createElement("div",{className:"d-flex align-items-center my-3"},"Carregando...",r.a.createElement("div",{className:"spinner-border ml-auto",role:"status","aria-hidden":"true"})))},F=function(e){var t=e.user,a=e.setUser;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement(v.a,{bg:"dark",variant:"dark"},r.a.createElement(v.a.Brand,null,"Dashboard"),r.a.createElement(v.a.Toggle,null),r.a.createElement(v.a.Collapse,{className:"justify-content-end"},r.a.createElement(v.a.Text,null,"Logado como ",t.email," ",r.a.createElement(p.a,{variant:"dark",onClick:function(){window.localStorage.removeItem("usuarioLogado"),a(null)}},"Logout"))))),r.a.createElement("main",{className:"container-fluid h-100"},r.a.createElement("div",{className:"row h-100"},r.a.createElement("div",{className:"col-sm-3 col-md-2 bg-light py-3 border-right"},r.a.createElement("nav",{className:"nav nav-pills flex-column"},r.a.createElement(i.c,{className:"nav-item nav-link",to:"/pacientes"},"Pacientes"),r.a.createElement(i.c,{className:"nav-item nav-link",to:"/usuarios"},"Usu\xe1rios"))),r.a.createElement("main",{className:"col-sm-9 col-md-10 bg-white p-4"},r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/pacientes/:id"},r.a.createElement(L,null)),r.a.createElement(u.b,{path:"/pacientes"},r.a.createElement(S,null)),r.a.createElement(u.b,{path:"/usuarios"},r.a.createElement(P,null)),r.a.createElement(u.b,{path:"/"},r.a.createElement(u.a,{to:"/pacientes"})))))))},M=function(){var e=Object(n.useState)(JSON.parse(window.localStorage.getItem("usuarioLogado"))),t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement(i.a,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/login"},r.a.createElement(y,{setUser:c})),r.a.createElement(u.b,{path:"/"},a?r.a.createElement(F,{user:a,setUser:c}):r.a.createElement(u.a,{to:"/login"}))),r.a.createElement("footer",{className:"text-center bg-dark text-muted p-3 mt-auto"},"O c\xf3digo desse site est\xe1 dispon\xedvel no ",r.a.createElement("a",{href:"https://github.com/bmnascimento/projeto-asma"},"GitHub")))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.0d427ad3.chunk.js.map